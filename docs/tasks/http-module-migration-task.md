# Техническая задача: перенести HTTP-инфраструктуру в `kafka-api`

## Контекст
- Цель — сделать модуль `kafka-api` самодостаточным для повторного использования в других проектах.
- DTO и Feign-клиенты остаются в тестовом модуле `src/test/java/com/uplatform/wallet_tests/api/http`.
- Требуется сохранить существующую конфигурацию (`app.api.*`) и добавить новый стандартный формат (`app.http.*`).

## Чек-лист реализации
- [ ] Подготовить `kafka-api`:
  - [ ] Добавить необходимые зависимости (`spring-cloud-starter-openfeign`, `feign-okhttp`, `spring-boot-starter-web`, `okhttp3`, при необходимости AOP) в `kafka-api/build.gradle`.
  - [ ] Создать пакеты `api/http/config` и `api/http/exceptions`.
- [ ] Перенести инфраструктуру HTTP:
  - [ ] Переместить `AllureFeignLogger`, `AllureFeignLoggerConfig`, вспомогательные конфигурации и исключения в новый пакет модуля `kafka-api`.
  - [ ] Обновить импорты и модификаторы доступа, убедиться в отсутствии зависимостей от тестовых DTO/клиентов.
- [ ] Добавить автоконфигурацию:
  - [ ] Реализовать `HttpApiAutoConfiguration` c условными бин-провайдерами (`@ConditionalOnClass`, `@ConditionalOnMissingBean`).
  - [ ] Зарегистрировать автоконфигурацию в `META-INF/spring.factories`.
- [ ] Стандартизировать конфигурацию:
  - [ ] Добавить модели `HttpModuleProperties` и т.д. для чтения секции `http` из JSON.
  - [ ] Обновить `DynamicPropertiesConfigurator` для генерации свойств `app.http.services.*` и обратных алиасов `app.api.*`.
  - [ ] Обновить `EnvironmentConfigurationProvider`/`ApiConfig`, чтобы поддерживать новый формат JSON с обратной совместимостью.
- [ ] Обновить тестовый модуль:
  - [ ] Перевести Feign-клиенты и конфигурации на использование классов из `kafka-api`.
  - [ ] Удалить дублирующий код в `src/test/java`.
  - [ ] Пересмотреть зависимости корневого проекта, оставив только необходимые клиентам.
- [ ] Документация и проверки:
  - [ ] Обновить `README` и конфигурационные примеры.
  - [ ] Прогнать регрессионные HTTP-тесты и smoke-сценарии после переноса.

## Артефакты
- План реализации: `docs/http-module-migration-plan.md`.
- Обновлённые конфигурации JSON (будут подготовлены в рамках задачи).

## Критерии приёмки
1. Любой проект, подключивший `kafka-api`, получает готовую HTTP-инфраструктуру без дополнительных конфигураций.
2. Все существующие тесты продолжают работать без изменений клиентов и DTO.
3. Документация отражает новый формат конфигурации и шаги по подключению модуля.
